---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';

export async function getStaticPaths() {
  // This would typically come from a database or API
  const factories = [
    {
      id: "techvision",
      name: "TechVision Electronics",
      logo: "https://placehold.co/200x200/e4e4e7/ffffff?text=TechVision",
      banner: "https://placehold.co/1920x400/e4e4e7/ffffff?text=Factory+Banner",
      country: "South Korea",
      founded: "2005",
      employees: "1,000+",
      description: "Leading manufacturer of premium consumer electronics with over 15 years of experience. Specializing in smart home devices, audio equipment, and mobile accessories. Known for innovative design and exceptional build quality.",
      rating: 4.7,
      reviews: 1250,
      certifications: ["ISO 9001", "ISO 14001", "Gold Standard", "Fair Trade Certified"],
      website: "https://techvision.example.com",
      products: [
        {
          id: 1,
          name: "Ultra HD Smart TV - 65\" OLED",
          image: "https://placehold.co/400x300/e4e4e7/ffffff?text=Smart+TV",
          price: "$1,499.99",
          rating: 4.8,
          reviews: 156
        },
        {
          id: 2,
          name: "Smart Home Hub Pro",
          image: "https://placehold.co/400x300/e4e4e7/ffffff?text=Smart+Hub",
          price: "$129.99",
          rating: 4.6,
          reviews: 89
        },
        {
          id: 3,
          name: "Wireless Soundbar System",
          image: "https://placehold.co/400x300/e4e4e7/ffffff?text=Soundbar",
          price: "$399.99",
          rating: 4.7,
          reviews: 234
        },
        {
          id: 4,
          name: "4K Streaming Media Player",
          image: "https://placehold.co/400x300/e4e4e7/ffffff?text=Media+Player",
          price: "$79.99",
          rating: 4.5,
          reviews: 178
        },
        {
          id: 5,
          name: "Smart LED Light Strip",
          image: "https://placehold.co/400x300/e4e4e7/ffffff?text=Light+Strip",
          price: "$49.99",
          rating: 4.4,
          reviews: 92
        },
        {
          id: 6,
          name: "Wireless Security Camera",
          image: "https://placehold.co/400x300/e4e4e7/ffffff?text=Camera",
          price: "$159.99",
          rating: 4.6,
          reviews: 145
        },
        {
          id: 7,
          name: "Smart Thermostat",
          image: "https://placehold.co/400x300/e4e4e7/ffffff?text=Thermostat",
          price: "$199.99",
          rating: 4.7,
          reviews: 167
        },
        {
          id: 8,
          name: "Bluetooth Speaker System",
          image: "https://placehold.co/400x300/e4e4e7/ffffff?text=Speaker",
          price: "$299.99",
          rating: 4.8,
          reviews: 203
        }
      ]
    }
  ];

  return factories.map(factory => ({
    params: { id: factory.id },
    props: { factory }
  }));
}

const { factory } = Astro.props;
---

<Layout>
  <Header />
  <main>
    {/* Factory Banner */}
    <div class="relative h-[250px] md:h-[300px] bg-gray-100">
      <img src={factory.banner} alt={factory.name} class="w-full h-full object-cover" />
      <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>
      <div class="absolute bottom-0 left-0 right-0">
        <div class="container mx-auto px-4 md:px-6 pb-6 md:pb-8">
          <div class="flex items-center gap-4 md:gap-6">
            <img src={factory.logo} alt={factory.name} class="w-20 h-20 md:w-24 md:h-24 rounded-xl border-4 border-white shadow-lg" />
            <div class="text-white">
              <h1 class="text-2xl md:text-3xl font-bold mb-2">{factory.name}</h1>
              <div class="flex items-center gap-4">
                <div class="flex items-center gap-1">
                  <div class="text-[var(--primary-yellow)]">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                      <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                    </svg>
                  </div>
                  <span class="font-medium">{factory.rating}</span>
                  <span class="text-sm text-gray-200">({factory.reviews} reviews)</span>
                </div>
                <span class="text-gray-200">â€¢</span>
                <div class="flex items-center gap-2">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064" />
                  </svg>
                  <span>{factory.country}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    {/* Factory Info */}
    <div class="container mx-auto px-4 md:px-6 py-8 md:py-12">
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8">
        <div class="lg:col-span-2">
          <div class="bg-white rounded-xl shadow-sm p-6 mb-8">
            <h2 class="text-lg md:text-xl font-semibold text-[var(--text-primary)] mb-3 md:mb-4">About {factory.name}</h2>
            <p class="text-sm md:text-base text-[var(--text-secondary)] leading-relaxed mb-6">{factory.description}</p>
            <div class="grid grid-cols-3 gap-4">
              <div class="text-center p-4 bg-gray-50 rounded-lg">
                <span class="block text-sm text-[var(--text-secondary)]">Founded</span>
                <span class="block text-lg font-semibold text-[var(--text-primary)]">{factory.founded}</span>
              </div>
              <div class="text-center p-4 bg-gray-50 rounded-lg">
                <span class="block text-sm text-[var(--text-secondary)]">Employees</span>
                <span class="block text-lg font-semibold text-[var(--text-primary)]">{factory.employees}</span>
              </div>
              <div class="text-center p-4 bg-gray-50 rounded-lg">
                <span class="block text-sm text-[var(--text-secondary)]">Products</span>
                <span class="block text-lg font-semibold text-[var(--text-primary)]">{factory.products.length}+</span>
              </div>
            </div>
          </div>

          <div class="bg-white rounded-xl shadow-sm p-6">
            <div class="flex items-center justify-between mb-6">
              <h2 class="text-xl font-semibold text-[var(--text-primary)]">Products</h2>
              <div class="flex items-center gap-2 text-[var(--primary-blue)]">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                </svg>
                <span class="text-sm font-medium">Hot Sellers</span>
              </div>
            </div>
            <div class="grid grid-cols-2 md:grid-cols-2 gap-4 md:gap-6">
              {factory.products.map(product => (
                <a href={`/product/${product.id}`} class="group">
                  <div class="bg-white border border-gray-100 rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow">
                    <img src={product.image} alt={product.name} class="w-full h-48 object-cover" />
              <div class="p-3 md:p-4">
                <h3 class="text-sm md:text-base font-medium text-[var(--text-primary)] group-hover:text-[var(--primary-blue)] transition-colors mb-2">
                        {product.name}
                      </h3>
                      <div class="flex items-center justify-between">
                        <span class="text-[var(--primary-blue)] font-semibold">{product.price}</span>
                        <div class="flex items-center gap-1">
                          <div class="text-[var(--primary-yellow)]">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24">
                              <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                            </svg>
                          </div>
                          <span class="text-sm font-medium">{product.rating}</span>
                          <span class="text-xs text-[var(--text-secondary)]">({product.reviews})</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </a>
              ))}
            </div>
          </div>
        </div>

        <div class="lg:col-span-1">
          <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
            <h3 class="text-lg font-semibold text-[var(--text-primary)] mb-4">Certifications</h3>
            <div class="flex flex-wrap gap-2">
              {factory.certifications.map(cert => (
                <span class="bg-blue-50 text-[var(--primary-blue)] text-sm font-medium px-3 py-1.5 rounded-lg">
                  {cert}
                </span>
              ))}
            </div>
          </div>

          <a href={factory.website} target="_blank" rel="noopener noreferrer" class="block w-full bg-[var(--primary-blue)] text-white text-center font-medium rounded-lg py-3 hover:bg-blue-700 transition-colors mb-6">
            Visit Factory Website
          </a>

          <div class="bg-[var(--primary-yellow)]/10 rounded-xl p-6">
            <div class="flex items-center gap-3 mb-4">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-[var(--primary-yellow)]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
              </svg>
              <h3 class="text-lg font-semibold text-[var(--text-primary)]">Gold Standard Verified</h3>
            </div>
            <p class="text-[var(--text-secondary)] text-sm">
              This factory has met our rigorous quality and reliability standards. We regularly audit their facilities and processes to ensure consistent quality.
            </p>
          </div>
        </div>
      </div>
    </div>
  </main>
</Layout>
